<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>–Ø–∫ –∑ —É—Å—ñ–º —Ü–∏–º –∂–∏—Ç–∏ –¥–∞–ª—ñ? | –Ø —î</title>

<meta name="description" content="–î—É–º–∫–∏, —Ç–µ–∫—Å—Ç–∏ —ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –≤–∂–µ –Ω–µ –º–æ–∂–µ –∂–∏—Ç–∏ '—è–∫ —Ä–∞–Ω—ñ—à–µ'. –ê—Ä—Ö–µ—Ç–∏–ø –ø—É–ª—å—Å—É—î, —Ç—ñ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ —Ä–æ–∑—É–º –ø–∏—Ç–∞—î: '–Ü —â–æ —Ç–µ–ø–µ—Ä?'" />
<meta name="keywords" content="—Å–∞–º–æ–ø—ñ–∑–Ω–∞–Ω–Ω—è, –∞—Ä—Ö–µ—Ç–∏–ø–∏, –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—è, –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Ä—ñ—Å—Ç, —è–∫ –∂–∏—Ç–∏ –¥–∞–ª—ñ, self-discovery, archetypes, psychology, inner growth, how to live on" />
<meta name="robots" content="index, follow" />

<!-- Open Graph -->
<meta property="og:title" content="–Ø–∫ –∑ —É—Å—ñ–º —Ü–∏–º –∂–∏—Ç–∏ –¥–∞–ª—ñ? | –Ø —î" />
<meta property="og:description" content="–î—É–º–∫–∏, —Ç–µ–∫—Å—Ç–∏ —ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –≤–∂–µ –Ω–µ –º–æ–∂–µ –∂–∏—Ç–∏ '—è–∫ —Ä–∞–Ω—ñ—à–µ'. –ê—Ä—Ö–µ—Ç–∏–ø –ø—É–ª—å—Å—É—î, —Ç—ñ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ —Ä–æ–∑—É–º –ø–∏—Ç–∞—î: '–Ü —â–æ —Ç–µ–ø–µ—Ä?'" />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/ya-e-og.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:locale" content="uk_UA" />

<link rel="icon" href="images/favicon-v2.png" />
<link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --primary-color:#4b0082; --secondary-color:#800080;
      --button-bg:#4c1d95; --button-hover:#5b21b6;
      --gray-50:#f9fafb; --white:#fff;
      --lang-toggle-bg:#fff; --lang-toggle-text:#000; --lang-toggle-border:#f00;
      --darkslategray:#2F4F4F;
    }
    *,*::before,*::after{box-sizing:border-box}
    body{font-family:'Lora',serif;margin:0;padding:0;line-height:1.6;background:var(--white);color:#111;display:flex;flex-direction:column;min-height:100vh}

    /* NAV */
    nav{background:linear-gradient(to right,var(--primary-color),var(--secondary-color));color:var(--white);padding:1rem;position:sticky;top:0;z-index:10}
    nav .container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
    .logo-link{display:flex;align-items:center;gap:.5rem;text-decoration:none;color:var(--white);font-weight:bold;font-size:1.5rem}
    .logo-img{width:32px;height:32px}
    .menu-toggle{display:none;font-size:1.5rem;cursor:pointer;background:none;border:none;color:var(--white)}
    nav ul{list-style:none;display:flex;gap:1rem;margin:0;padding:0}
    nav a{color:var(--white);text-decoration:none;padding:.5rem;display:block;font-size:.9375rem;transition:color .2s,transform .2s}
    nav a:hover,nav a:focus{color:#FFD700;transform:scale(1.05);text-decoration:underline}
    nav a.active{color:#FFD700;text-decoration:underline}
    .lang-toggle{cursor:pointer;font-weight:bold;color:var(--lang-toggle-text);background:var(--lang-toggle-bg);border:2px solid var(--lang-toggle-border);padding:.5rem 1rem;border-radius:9999px;text-decoration:none;font-size:1.125rem;transition:background-color .3s,transform .2s}
    .lang-toggle:hover,.lang-toggle:focus{background:#e0e0e0;transform:scale(1.05)}

    /* UTILS */
    .container{max-width:1200px;margin:0 auto;padding:0 1rem}
    .text-center{text-align:center}.text-white{color:var(--white)}
    .py-20{padding-top:5rem;padding-bottom:5rem}
    .py-16{padding-top:4rem;padding-bottom:4rem}
    .mb-0{margin-bottom:0}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}
    .text-4xl{font-size:2.25rem}.md\:text-5xl{font-size:3rem}
    .text-lg{font-size:1.125rem}.text-2xl{font-size:1.5rem}.text-sm{font-size:.875rem}
    .font-bold{font-weight:bold}.font-lora{font-family:'Lora',serif}
    .bg-gray-50{background-color:var(--gray-50)}
    .bg-gradient-to-r{background:linear-gradient(to right,var(--primary-color),var(--secondary-color))}
    .inline-block{display:inline-block}.rounded-full{border-radius:9999px}
    .px-8{padding-left:2rem;padding-right:2rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}
    .bg-indigo-600{background:var(--button-bg)} .bg-indigo-600:hover{background:var(--button-hover)}
    .max-w-2xl{max-width:42rem}.max-w-3xl{max-width:48rem}.mx-auto{margin-left:auto;margin-right:auto}
    .animate-fade-in{animation:fadeIn 1s ease-in}@keyframes fadeIn{from{opacity:0}to{opacity:1}}

    /* LANG VISIBILITY */
    .lang-section{display:none}.lang-section.active{display:inline}

    /* HERO */
    .subtitle{font-size:1.25rem;font-style:italic;margin-bottom:2rem}

    /* CONTROLS */
    .controls{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;justify-content:space-between;margin-bottom:1rem}
    .control-group{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
    .control-group label{font-size:.9375rem;color:#333}
    .control-input{padding:.55rem .75rem;border:1px solid #ccc;border-radius:.75rem;font-family:inherit;font-size:1rem;min-width:220px}
    .select{min-width:260px}
    .muted{color:#666;font-size:.9rem}

    /* ACCORDION */
    .accordion-wrap{max-width:48rem;margin:0 auto}
    .accordion-item{border-bottom:1px solid #ddd;margin-bottom:1rem;background:#fff;border-radius:.5rem;overflow:hidden}
    .accordion-header{padding:1rem;background:#f1f1f1;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .accordion-header:hover{background:#e7e7e7}
    .accordion-header h3{margin:0;font-size:1.25rem;color:var(--darkslategray)}
    .accordion-icon{font-size:1.2rem;line-height:1}
    .accordion-content{display:none;padding:1rem;background:#fff}
    .accordion-content.open{display:block}

    /* FOOTER */
    footer{background:var(--primary-color);color:var(--white);padding:1.5rem 1rem;text-align:center;margin-top:auto}
    footer a{color:#FFD700;text-decoration:underline}

    /* RESPONSIVE */
    @media (max-width:768px){
      .menu-toggle{display:block}
      nav .container{flex-direction:column;align-items:flex-start;padding:.5rem}
      nav ul{display:none;flex-direction:column;position:absolute;top:100%;left:0;width:100%;background:linear-gradient(to right,var(--primary-color),var(--secondary-color));padding:.5rem;box-shadow:0 4px 8px rgba(0,0,0,.2);animation:slideIn .3s ease}
      nav ul.active{display:flex}
      .logo-link{font-size:1.25rem;margin-bottom:.5rem}
      .logo-img{width:28px;height:28px}
      .lang-toggle{font-size:1rem;padding:.4rem .8rem;margin-top:.5rem;align-self:flex-end}
      nav a{font-size:.875rem;padding:.25rem}
      .py-20,.py-16{padding-top:2rem;padding-bottom:2rem}
      .text-4xl{font-size:2rem}.md\:text-5xl{font-size:2.5rem}
      .subtitle{font-size:1rem}
      .px-8{padding-left:1rem;padding-right:1rem}.py-3{padding-top:.5rem;padding-bottom:.5rem}
      .controls{gap:.5rem}
      .control-input{min-width:180px}
      .select{min-width:200px}
    }
    @media (max-width:480px){
      nav a{font-size:.75rem}
      .logo-link{font-size:1rem}.logo-img{width:24px;height:24px}
      .lang-toggle{font-size:.875rem;padding:.3rem .6rem}
      .text-4xl{font-size:1.5rem}.md\:text-5xl{font-size:2rem}.subtitle{font-size:.875rem}
      .controls{flex-direction:column;align-items:stretch}
      .control-group{width:100%;justify-content:space-between}
      .control-input{width:100%}
      .select{width:100%}
    }
    @media (max-width:320px){
      nav a{font-size:.625rem}
      .logo-link{font-size:.875rem}.logo-img{width:20px;height:20px}
      .lang-toggle{font-size:.75rem;padding:.2rem .4rem}
      .text-4xl{font-size:1.2rem}
    }
    @keyframes slideIn{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav role="navigation">
    <div class="container">
      <a href="index.html" class="logo-link" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É / Go to homepage">
        <img src="images/favicon-v2.png" alt="–õ–æ–≥–æ—Ç–∏–ø –Ø —î / I Am logo" class="logo-img">
        <span class="logo-text">
          <span class="lang-section lang-uk active">–Ø —î</span>
          <span class="lang-section lang-en">I Am</span>
        </span>
      </a>
      <button class="menu-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –º–µ–Ω—é –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó / Toggle navigation menu" aria-expanded="false">‚ò∞</button>
      <a href="#" class="lang-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –º–æ–≤—É / Toggle language">UA / EN</a>
      <ul id="primary-nav">
  <li><a href="index.html"><span class="lang-uk">–ì–æ–ª–æ–≤–Ω–∞</span><span class="lang-en" hidden>Home</span></a></li>
  <li><a href="archetypes.html"><span class="lang-uk">–ü—Ä–æ –∞—Ä—Ö–µ—Ç–∏–ø–∏</span><span class="lang-en" hidden>About Archetypes</span></a></li>
  <li><a href="about.html"><span class="lang-uk">–ü—Ä–æ –º–µ–Ω–µ</span><span class="lang-en" hidden>About Me</span></a></li>
  <li><a href="tools.html"><span class="lang-uk">–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</span><span class="lang-en" hidden>Tools</span></a></li>
  <li><a href="map-awareness-test-v2.html"><span class="lang-uk">–ú–∞–ø–∞ —É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äî –¢–µ—Å—Ç V2</span><span class="lang-en" hidden>Map of Awareness ‚Äî Test V2</span></a></li>
  <li><a href="mind-exploration.html"><span class="lang-uk">–ú–∏—Å–ª–µ–Ω–Ω–µ –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è</span><span class="lang-en" hidden>Mental Exploration</span></a></li>
  <li><a href="unravel-anxiety.html"><span class="lang-uk">–†–æ–∑–ø–ª—É—Ç—É–≤–∞–Ω–Ω—è –¢—Ä–∏–≤–æ–≥–∏</span><span class="lang-en" hidden>Anxiety Knot Unraveler</span></a></li>
  <li><a href="blog.html"><span class="lang-uk">–Ø–∫ –∂–∏—Ç–∏ –¥–∞–ª—ñ?</span><span class="lang-en" hidden>How to Live On?</span></a></li>
  <li><a href="humor.html"><span class="lang-uk">–ì—É–º–æ—Ä</span><span class="lang-en" hidden>Humor</span></a></li>
  <li><a href="price.html"><span class="lang-uk">–ü—Ä–∞–π—Å</span><span class="lang-en" hidden>Pricing</span></a></li>
  <li><a href="contact.html"><span class="lang-uk">–ö–æ–Ω—Ç–∞–∫—Ç–∏</span><span class="lang-en" hidden>Contact</span></a></li>
</ul>
    </div>
  </nav>

  <!-- HERO -->
  <section class="py-20 text-white text-center animate-fade-in bg-gradient-to-r">
    <div class="container mx-auto">
      <h2 class="text-4xl md:text-5xl font-bold font-lora mb-4">
        <span class="lang-section lang-uk active">–Ø–∫ –∑ —É—Å—ñ–º —Ü–∏–º –∂–∏—Ç–∏ –¥–∞–ª—ñ?</span>
        <span class="lang-section lang-en">How to Live with All This?</span>
      </h2>
      <p class="text-lg max-w-2xl mx-auto mb-6 subtitle">
        <span class="lang-section lang-uk active">–¢—É—Ç ‚Äî –¥—É–º–∫–∏, —Ç–µ–∫—Å—Ç–∏ —ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –≤–∂–µ –Ω–µ –º–æ–∂–µ –∂–∏—Ç–∏ "—è–∫ —Ä–∞–Ω—ñ—à–µ". –ê—Ä—Ö–µ—Ç–∏–ø –ø—É–ª—å—Å—É—î, —Ç—ñ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ —Ä–æ–∑—É–º –ø–∏—Ç–∞—î: "–Ü —â–æ —Ç–µ–ø–µ—Ä?"</span>
        <span class="lang-section lang-en">Here are thoughts, texts, and tips for those who can no longer live "as before." The archetype pulses, the body speaks, and the mind asks: "What now?"</span>
      </p>
    </div>
  </section>

  <!-- CONTROLS -->
  <section class="bg-gray-50">
    <div class="container mx-auto max-w-3xl">
      <div class="controls">
        <div class="control-group">
          <label for="search" class="lang-section lang-uk active">–ü–æ—à—É–∫:</label>
          <label for="search" class="lang-section lang-en">Search:</label>
          <input id="search" class="control-input" type="search"
                 placeholder="–ü–æ—à—É–∫ —É –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —ñ —Ç–µ–∫—Å—Ç—ñ‚Ä¶" aria-label="–ü–æ–ª–µ –ø–æ—à—É–∫—É">
        </div>
        <div class="control-group">
          <label for="sort" class="lang-section lang-uk active">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:</label>
          <label for="sort" class="lang-section lang-en">Sort by:</label>
          <select id="sort" class="control-input select" aria-label="–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è">
            <option value="dateDesc">üìÖ Date ‚Äî New ‚Üí Old</option>
            <option value="dateAsc">üìÖ Date ‚Äî Old ‚Üí New</option>
            <option value="titleAZ">üî§ Title ‚Äî A ‚Üí Z</option>
            <option value="titleZA">üî§ Title ‚Äî Z ‚Üí A</option>
          </select>
        </div>
      </div>
      <p id="resultMeta" class="muted mb-6"></p>
    </div>
  </section>

  <!-- POSTS + BUTTONS -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto max-w-3xl">
      <div id="posts" class="accordion-wrap"></div>

      <div class="buttons text-center mt-6">
        <a href="tools.html" class="inline-block bg-indigo-600 text-white px-8 py-3 rounded-full"> 
          <span class="lang-section lang-uk active">–ü–æ—á–∞—Ç–∏ —à–ª—è—Ö</span>
          <span class="lang-section lang-en">Start the Journey</span>
        </a>
        <a href="contact.html" class="inline-block bg-indigo-600 text-white px-8 py-3 rounded-full mt-4">
          <span class="lang-section lang-uk active">–ó–∞–¥–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è</span>
          <span class="lang-section lang-en">Ask a Question</span>
        </a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>
      <span class="lang-section lang-uk active">¬© 2025 –Ø —î. –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</span>
      <span class="lang-section lang-en">¬© 2025 I Am. All rights reserved.</span>
    </p>
      </footer>

  <script>
    // ---------- State ----------
    let postsData = [];
    let state = { lang: 'uk', query: '', sort: 'dateDesc' };

    // ---------- i18n labels ----------
    const SORT_LABELS = {
      uk: {
        dateDesc: 'üìÖ –î–∞—Ç–∞ ‚Äî –ù–æ–≤—ñ ‚Üí –°—Ç–∞—Ä—ñ',
        dateAsc:  'üìÖ –î–∞—Ç–∞ ‚Äî –°—Ç–∞—Ä—ñ ‚Üí –ù–æ–≤—ñ',
        titleAZ:  'üî§ –ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚Äî A ‚Üí Z',
        titleZA:  'üî§ –ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚Äî Z ‚Üí A',
      },
      en: {
        dateDesc: 'üìÖ Date ‚Äî New ‚Üí Old',
        dateAsc:  'üìÖ Date ‚Äî Old ‚Üí New',
        titleAZ:  'üî§ Title ‚Äî A ‚Üí Z',
        titleZA:  'üî§ Title ‚Äî Z ‚Üí A',
      }
    };

    const PLACEHOLDER = {
      uk: '–ü–æ—à—É–∫ —É –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —ñ —Ç–µ–∫—Å—Ç—ñ‚Ä¶',
      en: 'Search in titles and content‚Ä¶'
    };

    // ---------- Helpers ----------
    function setLang(lang){
      state.lang = lang;
      document.querySelectorAll('.lang-section').forEach(el=>el.classList.remove('active'));
      document.querySelectorAll('.lang-' + lang).forEach(el=>el.classList.add('active'));
      document.documentElement.lang = lang;
      localStorage.setItem('lang', lang);
      document.querySelector('.lang-toggle').textContent = (lang==='uk') ? 'UA / EN' : 'EN / UA';
      // Title + meta
      if(lang==='uk'){
        document.title = '–Ø–∫ –∑ —É—Å—ñ–º —Ü–∏–º –∂–∏—Ç–∏ –¥–∞–ª—ñ? | –Ø —î';
        document.querySelector('meta[property="og:title"]').content = '–Ø–∫ –∑ —É—Å—ñ–º —Ü–∏–º –∂–∏—Ç–∏ –¥–∞–ª—ñ? | –Ø —î';
        document.querySelector('meta[property="og:description"]').content =
          '–î—É–º–∫–∏, —Ç–µ–∫—Å—Ç–∏ —ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –≤–∂–µ –Ω–µ –º–æ–∂–µ –∂–∏—Ç–∏ "—è–∫ —Ä–∞–Ω—ñ—à–µ". –ê—Ä—Ö–µ—Ç–∏–ø –ø—É–ª—å—Å—É—î, —Ç—ñ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ —Ä–æ–∑—É–º –ø–∏—Ç–∞—î: "–Ü —â–æ —Ç–µ–ø–µ—Ä?"';
        document.querySelector('meta[name="description"]').content =
          '–î—É–º–∫–∏, —Ç–µ–∫—Å—Ç–∏ —ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –≤–∂–µ –Ω–µ –º–æ–∂–µ –∂–∏—Ç–∏ "—è–∫ —Ä–∞–Ω—ñ—à–µ". –ê—Ä—Ö–µ—Ç–∏–ø –ø—É–ª—å—Å—É—î, —Ç—ñ–ª–æ –≥–æ–≤–æ—Ä–∏—Ç—å, –∞ —Ä–æ–∑—É–º –ø–∏—Ç–∞—î: "–Ü —â–æ —Ç–µ–ø–µ—Ä?"';
      }else{
        document.title = 'How to Live with All This? | I Am';
        document.querySelector('meta[property="og:title"]').content = 'How to Live with All This? | I Am';
        document.querySelector('meta[property="og:description"]').content =
          'Here are thoughts, texts, and tips for those who can no longer live "as before." The archetype pulses, the body speaks, and the mind asks: "What now?"';
        document.querySelector('meta[name="description"]').content =
          'Here are thoughts, texts, and tips for those who can no longer live "as before." The archetype pulses, the body speaks, and the mind asks: "What now?"';
      }
      // controls i18n
      updateSortLabels(lang);
      const search = document.getElementById('search');
      if (search) search.placeholder = PLACEHOLDER[lang];
      updateResultMeta();
    }

    function toggleLang(){
      const newLang = (state.lang === 'uk') ? 'en' : 'uk';
      setLang(newLang);
      renderPosts(filteredAndSorted(), newLang);
    }

    function updateSortLabels(lang){
      const sel = document.getElementById('sort');
      if(!sel) return;
      Array.from(sel.options).forEach(opt=>{
        const v = opt.value;
        if (SORT_LABELS[lang] && SORT_LABELS[lang][v]){
          opt.textContent = SORT_LABELS[lang][v];
        }
      });
    }

    function parseDateSafe(d) {
  const t = (d || '').trim();
  if (!t) return null;

  const parts = t.split('-');
  if (parts.length !== 3) return null;

  const day = Number(parts[0]);
  const month = Number(parts[1]);
  const year = Number(parts[2]);

  if (
    !Number.isInteger(day) ||
    !Number.isInteger(month) ||
    !Number.isInteger(year)
  ) return null;

  const date = new Date(year, month - 1, day);

  // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ –¥–∞—Ç–∞ –Ω–µ ¬´–ø–µ—Ä–µ–∫–æ—Ç–∏–ª–∞—Å—å¬ª
  if (
    date.getFullYear() !== year ||
    date.getMonth() !== month - 1 ||
    date.getDate() !== day
  ) return null;

  return date;
}


    // ---------- Accordion ----------
    function bindAccordion(container){
      const headers = container.querySelectorAll('.accordion-header');
      headers.forEach(header=>{
        header.addEventListener('click', ()=>handleAccordion(header, container));
        header.addEventListener('keydown', (e)=>{
          if(e.key==='Enter' || e.key===' '){ e.preventDefault(); header.click(); }
        });
      });
    }

    function handleAccordion(header, container){
      const content = header.nextElementSibling;
      const isOpen = content.classList.contains('open');

      // if open -> close
      if(isOpen){
        content.classList.remove('open');
        content.setAttribute('aria-hidden','true');
        header.setAttribute('aria-expanded','false');
        const ic = header.querySelector('.accordion-icon'); if(ic) ic.textContent = '+';
        return;
      }

      // close others
      container.querySelectorAll('.accordion-content.open').forEach(c=>{
        c.classList.remove('open');
        c.setAttribute('aria-hidden','true');
        const h = c.previousElementSibling;
        if(h){
          h.setAttribute('aria-expanded','false');
          const ic = h.querySelector('.accordion-icon'); if(ic) ic.textContent = '+';
        }
      });

      // open current
      content.classList.add('open');
      content.setAttribute('aria-hidden','false');
      header.setAttribute('aria-expanded','true');
      const icon = header.querySelector('.accordion-icon'); if(icon) icon.textContent = '‚àí';
    }

    // ---------- Render ----------
    function renderPosts(posts, lang){
      const wrap = document.getElementById('posts');
      wrap.innerHTML = '';

      if(!posts.length){
        const empty = document.createElement('p');
        empty.className = 'muted';
        empty.textContent = (lang==='uk')
          ? '–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –∑–∞–ø–∏—Ç –∞–±–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è.'
          : 'No results. Try adjusting your query or sorting.';
        wrap.appendChild(empty);
        return;
      }

      posts.forEach(post=>{
        const item = document.createElement('div');
        item.className = 'accordion-item';
        item.innerHTML = `
          <div class="accordion-header" role="button" tabindex="0" aria-expanded="false">
            <h3 class="font-lora">
              <span class="lang-section lang-uk ${lang==='uk'?'active':''}">${post.title_uk || '–ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫—É'}</span>
              <span class="lang-section lang-en ${lang==='en'?'active':''}">${post.title_en || 'No title'}</span>
            </h3>
            <span class="accordion-icon">+</span>
          </div>
          <div class="accordion-content" aria-hidden="true">
            <p class="text-lg mb-4"><em>
              <span class="lang-section lang-uk ${lang==='uk'?'active':''}">–î–∞—Ç–∞: ${post.date || '–ù–µ–º–∞—î –¥–∞—Ç–∏'}</span>
              <span class="lang-section lang-en ${lang==='en'?'active':''}">Date: ${post.date || 'No date'}</span>
            </em></p>
            <div class="lang-section lang-uk ${lang==='uk'?'active':''}">${post.content_uk || ''}</div>
            <div class="lang-section lang-en ${lang==='en'?'active':''}">${post.content_en || ''}</div>
          </div>
        `;
        wrap.appendChild(item);
      });

      bindAccordion(wrap);
    }

    // ---------- Filtering, sorting ----------
    function filteredAndSorted(){
      const q = state.query.trim().toLowerCase();
      let list = postsData.slice();

      if(q){
        list = list.filter(p=>{
          const t1 = (p.title_uk||'').toLowerCase();
          const t2 = (p.title_en||'').toLowerCase();
          const c1 = (p.content_uk||'').toLowerCase();
          const c2 = (p.content_en||'').toLowerCase();
          return t1.includes(q) || t2.includes(q) || c1.includes(q) || c2.includes(q);
        });
      }

      switch(state.sort){
        case 'dateAsc':
          list.sort((a,b)=>{
            const da = parseDateSafe(a.date); const db = parseDateSafe(b.date);
            if(da && db) return da - db;
            if(da && !db) return 1;      // –±–µ–∑ –¥–∞—Ç–∏ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ
            if(!da && db) return -1;
            return (a.id||0) - (b.id||0);
          });
          break;
        case 'titleAZ':
          list.sort((a,b)=>{
            const A = (a.title_uk||a.title_en||'').toLowerCase();
            const B = (b.title_uk||b.title_en||'').toLowerCase();
            return A.localeCompare(B);
          });
          break;
        case 'titleZA':
          list.sort((a,b)=>{
            const A = (a.title_uk||a.title_en||'').toLowerCase();
            const B = (b.title_uk||b.title_en||'').toLowerCase();
            return B.localeCompare(A);
          });
          break;
        case 'dateDesc':
        default:
          list.sort((a,b)=>{
            const da = parseDateSafe(a.date); const db = parseDateSafe(b.date);
            if(da && db) return db - da;
            if(da && !db) return -1;     // –±–µ–∑ –¥–∞—Ç–∏ –≤ –∫—ñ–Ω—Ü—ñ
            if(!da && db) return 1;
            return (b.id||0) - (a.id||0);
          });
      }

      return list;
    }

    function updateResultMeta(){
      const el = document.getElementById('resultMeta');
      const n = filteredAndSorted().length;
      el.textContent = (state.lang==='uk')
        ? `–ó–Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å—ñ–≤: ${n}`
        : `Posts found: ${n}`;
    }

    // small debounce for search
    function debounce(fn, ms){
      let t; 
      return (...args)=>{ clearTimeout(t); t = setTimeout(()=>fn(...args), ms); };
    }

    // ---------- Boot ----------
    document.addEventListener('DOMContentLoaded', ()=>{
      // language
      const savedLang = localStorage.getItem('lang') || 'uk';
      setLang(savedLang);

      // menu
      const menuToggle = document.querySelector('.menu-toggle');
      const navUl = document.querySelector('nav ul');
      if(menuToggle && navUl){
        menuToggle.addEventListener('click', ()=>{
          const isExpanded = navUl.classList.toggle('active');
          menuToggle.setAttribute('aria-expanded', isExpanded);
          menuToggle.textContent = isExpanded ? '‚úï' : '‚ò∞';
        });
        menuToggle.addEventListener('keydown', (e)=>{
          if(e.key==='Enter' || e.key===' '){ e.preventDefault(); menuToggle.click(); }
        });
        navUl.querySelectorAll('a').forEach(a=>a.setAttribute('tabindex','0'));
      }

      // active link
      const currentPage = (window.location.pathname.split('/').pop() || 'index.html');
      navUl.querySelectorAll('a').forEach(link=>{
        if(link.getAttribute('href')===currentPage){ link.classList.add('active'); }
      });

      // language toggle
      document.querySelector('.lang-toggle').addEventListener('click', (e)=>{ e.preventDefault(); toggleLang(); });

      // controls events
      const search = document.getElementById('search');
      const sortSel = document.getElementById('sort');
      if (search){
        search.placeholder = PLACEHOLDER[state.lang];
        search.addEventListener('input', debounce((e)=>{
          state.query = e.target.value || '';
          updateResultMeta();
          renderPosts(filteredAndSorted(), state.lang);
        }, 200));
      }
      if (sortSel){
        updateSortLabels(state.lang);
        sortSel.value = state.sort;
        sortSel.addEventListener('change', (e)=>{
          state.sort = e.target.value;
          updateResultMeta();
          renderPosts(filteredAndSorted(), state.lang);
        });
      }

      // load posts
      fetch('./posts.json',{cache:'no-store'})
        .then(r=>{
          if(!r.ok) throw new Error(`–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è JSON: ${r.status} ${r.statusText}`);
          return r.json();
        })
        .then(data=>{
          if(!data.posts) throw new Error('–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON: –∫–ª—é—á "posts" –≤—ñ–¥—Å—É—Ç–Ω—ñ–π');
          postsData = data.posts;
          updateResultMeta();
          renderPosts(filteredAndSorted(), state.lang);
        })
        .catch(err=>{
          console.error(err);
          alert(`–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—Å—Ç–∏: ${err.message}. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–π —Ñ–∞–π–ª posts.json.`);
        });
    });
  </script>
</body>
</html>
